<div class="eligibility-checker-container" [@fadeInAnimation]>
  <h1>Eligibility Checker</h1>
  <p>Check your loan eligibility quickly and easily.</p>

  <form class="eligibility-form" (ngSubmit)="onSubmit(eligibilityForm)" #eligibilityForm="ngForm">
    <div class="form-group">
      <label for="loanType">Loan Type</label>
      <input
        type="text"
        id="loanType"
        [formControl]="loanTypeControl"
        [matAutocomplete]="auto"
        placeholder="Select or type loan type"
        required
        class="input-field fadeSlideRight_TechTrends"
      />
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onLoanTypeSelected($event)">
        <mat-option *ngFor="let option of filteredLoanTypes | async" [value]="option.viewValue">
          {{ option.viewValue }}
        </mat-option>
      </mat-autocomplete>
    </div>

    <div class="form-group">
      <label for="monthlySalary">Monthly Salary (₹)</label>
      <input
        type="number"
        id="monthlySalary"
        name="monthlySalary"
        [(ngModel)]="monthlySalary"
        required
        min="0"
        class="input-field"
      />
    </div>

    <div class="form-group">
      <label for="loanAmount">Loan Amount (₹)</label>
      <input
        type="number"
        id="loanAmount"
        name="loanAmount"
        [(ngModel)]="loanAmount"
        required
        min="0"
        class="input-field"
      />
    </div>

    <div class="form-group">
      <label for="tenureMonths">Loan Tenure (months)</label>
      <input
        type="number"
        id="tenureMonths"
        name="tenureMonths"
        [(ngModel)]="tenureMonths"
        required
        min="1"
        class="input-field"
      />
    </div>

    <div class="form-group">
      <label for="expenses">Monthly Expenses (₹)</label>
      <input
        type="number"
        id="expenses"
        name="expenses"
        [(ngModel)]="expenses"
        min="0"
        class="input-field"
      />
    </div>

    <button type="submit" [disabled]="!eligibilityForm.form.valid" class="submit-button">
      Check Eligibility
    </button>
  </form>

  <div class="result" *ngIf="result !== null" [@fadeInAnimation]>
    <h2>Result</h2>
    <p class="explanation" [ngClass]="{'eligible': result.eligible, 'not-eligible': !result.eligible}">
      {{ result.eligible ? '✅' : '❌' }} {{ explanation }}
    </p>
    <p>EMI: ₹{{ result.emi | number:'1.2-2' }}</p>
    <p>EMI to Income Ratio: {{ result.ratio | number:'1.2-2' }}%</p>
  </div>
</div>
