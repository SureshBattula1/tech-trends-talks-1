<!-- loan-calculator.component.html -->
<div class="app-calculator-container">
  <section>
    <form  (ngSubmit)="calculateEMI()">
      <mat-card>
        <mat-card-content>
          <div fxLayout="row" fxLayoutGap="16px" fxFlexFill fxLayout.lt-sm="column">
            <mat-form-field fxFlex appearance="outline">
              <mat-label>Loan Amount</mat-label>
              <input matInput type="number" [(ngModel)]="amount" name="amount" required />
            </mat-form-field>

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Interest Rate (%)</mat-label>
              <input matInput type="number" [(ngModel)]="interestRate" name="interestRate" required />
            </mat-form-field>

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Loan Term (Years)</mat-label>
              <input matInput type="number" [(ngModel)]="years" name="years" required />
            </mat-form-field>
          </div>
          <div class="action-buttons">
            <button mat-raised-button color="primary" type="submit">Calculate</button>
          </div>
        </mat-card-content>
      </mat-card>
    </form>
  </section>

  <section>
    <mat-card *ngIf="emi !== null" class="app-calculator-result-card">
      <mat-card-header>
        <!-- <mat-card-title>Results</mat-card-title> -->
      </mat-card-header>
      <mat-card-content>
        <div class="app-calculator-result-content"> 
          <div class="flex-row">
            <div class="flex-item-12">
              <div class="flex-row">
                <div>Monthly EMI:</div> 
                  <div>â‚¹{{ emi | number: '1.2-2' }} </div> 
              </div>
              <div class="flex-row">
                <div>Total Interest:</div>
                  <div> â‚¹{{ totalInterest | number: '1.2-2' }} </div>
                </div>
              <div class="flex-row">
                <div>Total Payment:</div>
                 <div>â‚¹{{ totalPayment | number: '1.2-2' }} </div>
              </div>
            </div>
            <div class="flex-item-12"></div>
          </div>
         
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <section>
    <div *ngIf="schedule.length > 0" class="schedule-table">
      <table mat-table [dataSource]="schedule" class="mat-elevation-z2">

        <ng-container matColumnDef="month">
          <th mat-header-cell *matHeaderCellDef>Month</th>
          <td mat-cell *matCellDef="let row">{{ row.month }}</td>
        </ng-container>

        <ng-container matColumnDef="principal">
          <th mat-header-cell *matHeaderCellDef>Principal</th>
          <td mat-cell *matCellDef="let row">{{ row.principal }}</td>
        </ng-container>

        <ng-container matColumnDef="interest">
          <th mat-header-cell *matHeaderCellDef>Interest</th>
          <td mat-cell *matCellDef="let row">{{ row.interest }}</td>
        </ng-container>

        <ng-container matColumnDef="balance">
          <th mat-header-cell *matHeaderCellDef>Balance</th>
          <td mat-cell *matCellDef="let row">{{ row.balance }}</td>
        </ng-container>

      
        <tr mat-header-row *matHeaderRowDef="['month', 'principal', 'interest', 'balance']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['month', 'principal', 'interest', 'balance'];"></tr> 
      </table>
    </div>
  </section>

  <section>
    <div class="export-buttons">
      <button mat-button (click)="exportToPDF()">ðŸ“„ Export PDF</button>
      <button mat-button (click)="exportToExcel()">ðŸ“Š Export Excel</button>
    </div>
  </section>
</div>
